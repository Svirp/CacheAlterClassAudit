# CacheAlterClassAudit
AuditRequire содержит методы для аудита изменений структуры класса. Для реализации аудита событий изменений класса необходимо унаследовать AuditRequire(абстрактный класс). В основе функционирования лежит перехват при компиляции состояния класса - метод OnCompile, сопоставление полей, записанных в таблицах AuditTables и AuditFields с текущим значением хэша и с полями из системной таблицы %Dictionary.CompiledProperty. С помощью программы можно осуществить аудит изменения имени поля, его Cardinallity, Collection, Parameters, Parent, Private, Required, Type. При необходимость можно по аналогии расширить анализируемые свойства. Для учета иных измений сравнивается хэши класса, но в таком случае не будет подробно описаны измения.
Чтобы программа работала, нужно добавить пользовательское событие аудита  "UserAudit/ClassAudit/Alter class". В поле Event Data при регистрации события может содержатся дополнительная информация. Для удобства описание события также просматривается с помощью глобала ^AuditClassInfo (работает даже если не настроен аудит).
Схожим образом можно настроить аудит изменений методов класса. В таком случае можно использовать системный класс %Dictionary.CompiledMethod
БЫла выбрана модульная структура, поскольку наблюдалось странное поведение метода OnCompile(). Внутри него код выполнялся не всегда корректно, однако при перемещении кода в отдельную функции работает нормально. К тому же сам метод OnCompile() невозможно отлаживать.
